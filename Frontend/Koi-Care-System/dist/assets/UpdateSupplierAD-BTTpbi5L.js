import{e as N,d as S,u as j,r as o,j as e,a as p,B as m}from"./index-DJCnzeuI.js";import{L as y,H as k}from"./LeftSideBar-Ce9wCFYJ.js";import{T as v}from"./TopLayoutAD-TDVSMZH9.js";import{a as $}from"./index.esm-I7So98a0.js";import"./index-DN07_IMb.js";import"./index-D1y2TWOl.js";/* empty css            */import"./logo-DG-ZgLhE.js";function H(){const{id:i}=N(),{isDarkMode:a}=S(),c=j(),[d,u]=o.useState(!1),[L,l]=o.useState(!0),[A,x]=o.useState(null),{register:n,handleSubmit:h,formState:{errors:t},reset:b}=$(),g=async()=>{try{const s=localStorage.getItem("token");if(!s)throw new Error("No token found");const r=await p.get(`https://koicaresystemv2.azurewebsites.net/api/suppliers/supplier/${i}/by_id`,{headers:{Authorization:`Bearer ${s}`}});x(r.data.data),b(r.data.data)}catch(s){console.error("Error fetching supplier:",s),m.error("Failed to fetch supplier details.")}finally{l(!1)}};o.useEffect(()=>{g()},[i]);const f=async s=>{l(!0),u(!0);try{const r=localStorage.getItem("token");if(!r)throw new Error("No token found");const q=await p.put(`https://koicaresystemv2.azurewebsites.net/api/suppliers/supplier/${i}/update`,{name:s.name,phone:s.phone,address:s.address},{headers:{Authorization:`Bearer ${r}`}});m.success("Supplier updated successfully!"),c("/admin/supplier")}catch(r){console.log(r),m.error("Failed to update Supplier.")}finally{u(!1),l(!1)}},w=s=>{f(s)};return e.jsxs("div",{className:"h-screen flex",children:[e.jsx(y,{}),e.jsxs("div",{className:`relative ${a?"bg-custom-light text-white":"bg-white text-black"} overflow-y-auto flex-1 flex-col  overflow-x-hidden duration-200 ease-linear`,children:[e.jsx(k,{}),e.jsxs("div",{className:"py-5 pb-0 px-[30px] mx-auto max-w-[1750px]",children:[e.jsx(v,{text:"Supplier",textName:"Update Supplier",links:"admin/supplier"}),e.jsx("div",{className:"p-6 rounded-md border",children:e.jsxs("form",{onSubmit:h(w),noValidate:!0,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium mb-2",children:"Supllier Name"}),e.jsx("input",{type:"text",id:"name",className:`w-full p-2 border rounded-md ${a?"bg-custom-dark text-white":"bg-white text-black"} ${t.tags?"border-red-500":"border-gray-300"}`,...n("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters long"},maxLength:{value:50,message:"Name must not exceed 50 characters"}})}),t.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.name.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium mb-2",children:"Supplier Phone"}),e.jsx("input",{type:"number",id:"phone",className:`w-full p-2 border rounded-md ${a?"bg-custom-dark text-white":"bg-white text-black"} ${t.tags?"border-red-500":"border-gray-300"}`,...n("phone",{required:"Phone is required",pattern:{value:/^0[0-9]{8,9}$/,message:"Phone number must start with 0 and between 9 and 10 numbers"}})}),t.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.phone.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium mb-2",children:"Supllier Address"}),e.jsx("input",{type:"text",id:"address",className:`w-full p-2 border rounded-md ${a?"bg-custom-dark text-white":"bg-white text-black"} ${t.tags?"border-red-500":"border-gray-300"}`,...n("address",{required:"Address is required",minLength:{value:5,message:"Address must be at least 5 characters long"},maxLength:{value:100,message:"Address must not exceed 200 characters"}})}),t.address&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.address.message})]}),e.jsx("button",{type:"submit",className:`px-4 py-2 bg-blue-600 text-white rounded-md ${d?"opacity-50 cursor-not-allowed":"hover:bg-blue-700"}`,disabled:d,children:d?"Submitting...":"Update Supplier"})]})})]})]})]})}export{H as default};
