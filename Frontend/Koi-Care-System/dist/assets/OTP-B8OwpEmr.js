import{r as l,u as p,j as t,L as y,a as x,B as c}from"./index-DjioKAOI.js";import{b as j}from"./0917(1)-C6vz000w.js";import{F as v}from"./index-CkLjUQaR.js";function k(){const[e,n]=l.useState([0,0,0,0,0,0]),[f,i]=l.useState(60),[s,d]=l.useState(!0),g=p(),[m,u]=l.useState(!1),o=localStorage.getItem("email"),h=()=>{s||(u(!0),x.post(`https://koicaresystemv2.azurewebsites.net/api/auth/forgotPassword/${o}`).then(()=>{d(!0),i(60),c.success("A new OTP has been sent to your email.")}).finally(()=>u(!1)))},b=async()=>{const r=e.join("");localStorage.setItem("otp",r),x.post(`https://koicaresystemv2.azurewebsites.net/api/auth/verifyOtp/${o}/${r}`).then(()=>{g("/resetPassword"),c.success("input OTP success")}).catch(()=>c.error("input OTP fail !!"))};return l.useEffect(()=>{let r=setInterval(()=>{i(a=>(a<=1&&clearInterval(r),a<=1&&d(!1),a<=0?a:a-1))},1e3);return()=>clearInterval(r)},[s]),t.jsxs("div",{className:"h-screen flex flex-col items-center justify-center",children:[t.jsx("video",{className:"absolute top-0 left-0 w-full h-full object-cover",src:j,autoPlay:!0,loop:!0,muted:!0}),t.jsxs("div",{className:"absolute bg-white p-8 min-w-[65vh] rounded-3xl shadow-md w-full max-w-md bg-opacity-30 backdrop-blur-0 border border-gray-300",children:[t.jsx("h2",{className:"text-black text-3xl font-bold mb-6 text-center",children:"Email Verification"}),t.jsxs("h5",{className:"text-black text-xl font-bold mb-6 text-center",children:["We have sent a code to your email ",o]}),t.jsxs("div",{className:"flex flex-row items-center justify-between mx-auto w-full mb-6",children:[t.jsx("div",{className:"w-16 h-16",children:t.jsx("input",{maxLength:"1",className:"w-full font-bold h-full flex items-center justify-center text-center px-5 outline-none rounded-xl border text-lg bg-gray-700 bg-transparent focus:ring-1 ring-red-600 border-gray-500 placeholder-gray-500",type:"text",onChange:r=>{n([r.target.value,e[1],e[2],e[3],e[4],e[5]])}})}),t.jsx("div",{className:"w-16 h-16",children:t.jsx("input",{maxLength:"1",className:"w-full font-bold h-full flex items-center justify-center text-center px-5 outline-none rounded-xl border text-lg bg-gray-700 bg-transparent focus:ring-1 ring-red-600 border-gray-500 placeholder-gray-500",type:"text",onChange:r=>{n([e[0],r.target.value,e[2],e[3],e[4],e[5]])}})}),t.jsx("div",{className:"w-16 h-16",children:t.jsx("input",{maxLength:"1",className:"w-full font-bold h-full flex items-center justify-center text-center px-5 outline-none rounded-xl border text-lg bg-gray-700 bg-transparent focus:ring-1 ring-red-600 border-gray-500 placeholder-gray-500",type:"text",onChange:r=>{n([e[0],e[1],r.target.value,e[3],e[4],e[5]])}})}),t.jsx("div",{className:"w-16 h-16",children:t.jsx("input",{maxLength:"1",className:"w-full font-bold h-full flex items-center justify-center text-center px-5 outline-none rounded-xl border text-lg bg-gray-700 bg-transparent focus:ring-1 ring-red-600 border-gray-500 placeholder-gray-500",type:"text",onChange:r=>{n([e[0],e[1],e[2],r.target.value,e[4],e[5]])}})}),t.jsx("div",{className:"w-16 h-16",children:t.jsx("input",{maxLength:"1",className:"w-full font-bold h-full flex items-center justify-center text-center px-5 outline-none rounded-xl border text-lg bg-gray-700 bg-transparent focus:ring-1 ring-red-600 border-gray-500 placeholder-gray-500",type:"text",onChange:r=>{n([e[0],e[1],e[2],e[3],r.target.value,e[5]])}})}),t.jsx("div",{className:"w-16 h-16",children:t.jsx("input",{maxLength:"1",className:"w-full font-bold h-full flex items-center justify-center text-center px-5 outline-none rounded-xl border text-lg bg-gray-700 bg-transparent focus:ring-1 ring-red-600 border-gray-500 placeholder-gray-500",type:"text",onChange:r=>{n([e[0],e[1],e[2],e[3],e[4],r.target.value])}})})]}),t.jsx("button",{onClick:()=>b(),className:"w-full flex items-center justify-center bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-semibold mb-6",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[m&&t.jsx(v,{className:"animate-spin"}),t.jsx("span",{children:"Verify Account"})]})}),t.jsxs("div",{className:"flex flex-row items-center justify-center text-center text-sm font-medium space-x-1 text-black",children:[t.jsx("p",{className:"text-black",children:"Didn't receive the code?"}),t.jsx(y,{className:"flex flex-row items-center font-bold",style:{color:s?"black":"blue",cursor:s?"not-allowed":"pointer",textDecoration:s?"none":"underline"},onClick:()=>h(),children:s?`Resend OTP in ${f}s`:"Resend OTP"})]})]})]})}export{k as default};
