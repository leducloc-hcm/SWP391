import{d as ee,e as te,r as o,u as se,y as re,j as e,L as E,z as le,a as i,B as oe}from"./index-DjioKAOI.js";import{L as ae,H as ie}from"./LeftSideBar-DxSnASh1.js";import{T as ne}from"./TopLayoutAD-DMSOEnWy.js";import"./index-dY6csf_Q.js";import"./index-CkLjUQaR.js";/* empty css            */import"./logo-DG-ZgLhE.js";function pe(){var I;const{isDarkMode:c}=ee(),{id:n}=te(),[r,B]=o.useState([]),[w,P]=o.useState([]),R=se(),[p,f]=o.useState(0),[N,k]=o.useState(1),[m,z]=o.useState("description"),[C,W]=o.useState([]),[L,D]=o.useState(null),[b,d]=o.useState(0),[F,x]=o.useState(0),[v,g]=o.useState(""),[S,j]=o.useState(null),[V,A]=o.useState(!1),_=re(),M=t=>{_(le(t,N))},T=t=>{D(L===t?null:t)},u=r.images||[],G=()=>{k(t=>t+1)},H=()=>{k(t=>t>1?t-1:t)},Q=()=>{f(t=>(t+1)%u.length)},U=()=>{f(t=>t===0?u.length-1:t-1)},$=async()=>{var t,s;try{const l=localStorage.getItem("token");if(!l)throw new Error("No token found");const a=await i.get(`https://koicaresystemv2.azurewebsites.net/api/products/product/${n}/product`,{headers:{Authorization:`Bearer ${l}`}});B(a.data.data)}catch(l){i.isAxiosError(l)?((t=l.response)==null?void 0:t.status)===401?(console.error("Unauthorized access - Token expired or invalid. Logging out..."),localStorage.removeItem("token"),localStorage.removeItem("id"),oe.error("Token expired navigate to login"),R("/login")):console.error("Error fetching ponds:",(s=l.response)==null?void 0:s.status,l.message):console.error("An unexpected error occurred:",l)}},Z=async()=>{var t;try{const s=localStorage.getItem("token"),l=((t=r.category)==null?void 0:t.name)||"";if(!s)throw new Error("No token found");const a=await i.get(`https://koicaresystemv2.azurewebsites.net/api/products/product/${l}/all/products`,{headers:{Authorization:`Bearer ${s}`}});l||console.log("No category available");const y=a.data.data.filter(X=>String(X.id)!==String(n));P(y)}catch(s){console.log(s)}},h=async()=>{try{const t=localStorage.getItem("token"),s=await i.get(`https://koicaresystemv2.azurewebsites.net/api/feedbacks/product/${n}`,{headers:{Authorization:`Bearer ${t}`}});W(s.data.data)}catch(t){console.log(t)}},q=async t=>{try{const s=localStorage.getItem("token");await i.delete(`https://koicaresystemv2.azurewebsites.net/api/feedbacks/feedback/${t}/delete`,{headers:{Authorization:`Bearer ${s}`}}),h()}catch(s){console.log(s)}},J=async()=>{try{const t=localStorage.getItem("token"),s=localStorage.getItem("id");await i.post("https://koicaresystemv2.azurewebsites.net/api/feedbacks",{star:b,comment:v,userId:s,productId:n},{headers:{Authorization:`Bearer ${t}`}}),h(),$(),d(0),g(""),x(0)}catch(t){console.error("Error details:",t)}},O=t=>{j(t),localStorage.setItem("id_feed",t.id),d(t.star),g(t.comment),A(!0)},Y=()=>{j(null),d(0),g(""),x(0),A(!1)},K=async()=>{try{const t=localStorage.getItem("token"),s=localStorage.getItem("id_feed");await i.put("https://koicaresystemv2.azurewebsites.net/api/feedbacks",{id:s,star:b,comment:v,productId:n},{headers:{Authorization:`Bearer ${t}`}}),h(),d(0),g(""),x(0),j(null)}catch(t){console.log(t)}};return o.useEffect(()=>{h()},[]),o.useEffect(()=>{$()},[n]),o.useEffect(()=>{r!=null&&r.category&&Z()},[r]),e.jsx("div",{children:e.jsxs("div",{className:"h-screen flex",children:[e.jsx(ae,{}),e.jsxs("div",{className:`relative ${c?"bg-custom-dark text-white":"bg-white text-black"} shadow-xl flex-1 flex-col overflow-y-auto overflow-x-hidden`,children:[e.jsx(ie,{}),e.jsxs("div",{className:"py-5 px-[30px] mx-auto max-w-[1750px] ",children:[e.jsx(ne,{text:"Products",textName:"View Product",links:"admin/product"}),e.jsxs("div",{className:"grid lg:grid-cols-7 grid-cols-1 lg:border lg:border-gray-200 lg:px-7 lg:py-5 min-h-[700px] rounded-xl",children:[e.jsx("div",{className:"col-span-3",children:e.jsxs("div",{id:"controls-carousel",className:"relative w-full","data-carousel":"static",children:[e.jsx("div",{className:"relative lg:h-[650px] md:h-[650px] h-[350px] duration-500 transition-all overflow-hidden rounded-xl border border-gray-200",children:u.map((t,s)=>e.jsx("div",{className:`duration-500 transition-all  ${s===p?"block":"hidden"}`,"data-carousel-item":s===p?"active":"",children:e.jsx("img",{src:t.downloadUrl,className:"absolute block w-full h-full",alt:`Image ${s+1}`})},t.id))}),e.jsx("div",{className:"flex mt-4 gap-2 justify-start",children:u.map((t,s)=>e.jsx("button",{onClick:()=>f(s),className:`lg:size-32 md:size-32 size-20 border rounded-md overflow-hidden focus:outline-none ${p===s?"border-blue-500":"border-gray-300"}`,children:e.jsx("img",{src:t.downloadUrl,className:"w-full h-full object-cover",alt:`Thumbnail ${s+1}`})},t.id))}),e.jsx("button",{type:"button",className:"absolute lg:top-0 -top-10 lg:start-0 -start-3 z-10 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none",onClick:U,children:e.jsxs("span",{className:"inline-flex items-center justify-center lg:size-8 size-6 rounded-full bg-black",children:[e.jsx("svg",{className:"w-4 h-4 text-white rtl:rotate-180","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 1 1 5l4 4"})}),e.jsx("span",{className:"sr-only",children:"Previous"})]})}),e.jsx("button",{type:"button",className:"absolute lg:top-0 -top-10 lg:end-0 -end-3 z-10 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none",onClick:Q,children:e.jsxs("span",{className:"inline-flex items-center justify-center lg:size-8 size-6 rounded-full bg-black",children:[e.jsx("svg",{className:"w-4 h-4 text-white rtl:rotate-180","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 9 4-4-4-4"})}),e.jsx("span",{className:"sr-only",children:"Next"})]})})]})}),e.jsxs("div",{className:"col-span-4 lg:px-10 lg:py-8 py-5",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsxs("div",{className:"flex gap-5 items-center",children:[e.jsx("div",{className:`p-2 rounded-2xl ${c?"bg-custom-layout-dark":"bg-custom-layout-light"} `,children:"In Stock"}),e.jsx("div",{children:((I=r.category)==null?void 0:I.name)||"No category available"})]}),e.jsx("div",{className:"lg:text-3xl md:text-2xl text-xl font-semibold mt-5",children:r.name}),e.jsx("div",{className:"lg:text-xl md:text-xl text-lg text-justify mt-5",children:r.description}),e.jsxs("div",{className:"lg:text-3xl md:text-2xl text-xl lg:mt-5 mt-2 font-semibold",children:[" ",((r==null?void 0:r.price)??0).toLocaleString("vi-VN",{style:"currency",currency:"VND"})]}),e.jsxs("div",{className:"flex lg:mt-5 mt-2 gap-3 items-center",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((t,s)=>{const l=s<Math.floor(r.rating),a=s<r.rating&&s>=Math.floor(r.rating);return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:l?"gold":a?"url(#half-star)":"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"lg:size-6 md:size-6 size-5 text-yellow-500",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-star",children:[e.jsx("stop",{offset:"50%",stopColor:"gold"}),e.jsx("stop",{offset:"50%",stopColor:"none"})]})}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3.5l2.715 5.451 6.027.488-4.373 3.751 1.331 5.551L12 15.902l-5.7 3.839 1.331-5.551-4.373-3.751 6.027-.488L12 3.5z"})]},s)})}),e.jsxs("div",{className:"lg:text-xl md:text-xl text-lg text-blue-300",children:["(",C.length," reviews)"]})]})]}),e.jsxs("div",{className:"flex mt-5 gap-5 items-center border-b border-gray-200 pb-10 pt-5",children:[e.jsx("div",{className:"lg:text-3x md:text-3xl text-xl font-semibold",children:"Quantity:"}),e.jsxs("div",{className:"flex border border-blue-400 gap-5 rounded-lg",children:[e.jsx("button",{className:"border-blue-400 border-r rounded-lg p-2",onClick:H,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"lg:size-8 md:size-8 size-5 text-blue-400",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})})}),e.jsx("input",{type:"text",value:N,readOnly:!0,className:`outline-none lg:w-10 md:w-10 w-4 text-center text-xl text-blue-400 ${c?"bg-custom-dark":""}`}),e.jsx("button",{className:"border-l border-blue-400 p-2",onClick:G,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"lg:size-8 md:size-8 size-5 text-blue-400",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})]})]}),e.jsxs("div",{className:"flex lg:flex-row flex-col mt-5 gap-5 items-center border-b border-gray-200 pb-10 pt-5",children:[e.jsx(E,{to:"/member/checkout",onClick:()=>M(r),className:"lg:text-xl lg:py-4 lg:px-10 text-lg w-full text-center py-3 bg-blue-400 hover:bg-blue-500 text-white rounded-lg",children:"Buy Now"}),e.jsx("button",{onClick:()=>M(r),className:"lg:text-xl lg:py-4 lg:px-10 text-lg w-full text-center py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg",children:"Add to cart"})]})]})]}),e.jsxs("div",{className:"lg:mt-20 mt-10 lg:border lg:border-gray-200 rounded-xl lg:px-10 lg:py-5",children:[e.jsx("div",{className:"lg:text-3xl text-xl",children:"Post Reviews"}),e.jsx("div",{className:"flex items-center lg:mt-10 mt-3",children:[...Array(5)].map((t,s)=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:s<(F||b)?"gold":"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"lg:size-8 size-6 cursor-pointer hover:scale-110 text-yellow-400 transition-transform duration-200",onMouseEnter:()=>x(s+1),onMouseLeave:()=>x(0),onClick:()=>d(s+1),children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3.5l2.715 5.451 6.027.488-4.373 3.751 1.331 5.551L12 15.902l-5.7 3.839 1.331-5.551-4.373-3.751 6.027-.488L12 3.5z"})},s))}),e.jsx("textarea",{type:"text",value:v,onChange:t=>g(t.target.value),className:`mt-5 rounded-xl w-full lg:h-32 h-20 text-black px-5 py-2 focus:border ${c?"bg-custom-dark text-white":""} focus:border-blue-400 text-start flex outline-none border border-gray-200`}),e.jsx("button",{type:"submit",className:"mt-5 lg:px-5 lg:py-3 py-2 px-3 lg:text-base text-sm bg-blue-400 hover:bg-blue-500 rounded-lg text-white",onClick:S?K:J,children:S?"Edit Review":"Post Review"}),V&&e.jsx("button",{type:"button",className:"lg:px-5 lg:py-3 py-2 px-3 lg:text-base text-sm bg-red-400 hover:bg-red-500 rounded-lg ml-5 text-white",onClick:Y,children:"Cancel"})]}),e.jsxs("div",{className:"lg:mt-20 mt-10 lg:border rounded-xl lg:border-gray-200 lg:px-10 lg:py-5",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:`lg:text-xl text-lg py-3 px-4 border-b cursor-pointer ease-in duration-200 ${m==="description"?" border-blue-400":"border-transparent"}`,onClick:()=>z("description"),children:"Description"}),e.jsx("div",{className:`lg:text-xl text-lg py-3 px-4 border-b cursor-pointer ${m==="reviews"?"border-blue-400":"border-transparent"}`,onClick:()=>z("reviews"),children:"Reviews"})]}),e.jsxs("div",{className:"py-3",children:[m==="description"&&e.jsxs("div",{className:"",children:[e.jsx("div",{className:"lg:text-2xl text-xl font-semibold text-justify py-5",children:r.description}),e.jsx("div",{className:"text-lg text-justify indent-7 py-2",children:r.description_detail})]}),m==="reviews"&&e.jsxs("div",{className:"flex lg:flex-row flex-col gap-10",children:[e.jsxs("div",{className:"flex-none lg:w-[400px] max-h-[280px] border border-gray-200 flex flex-col items-center justify-center lg:py-20 py-10",children:[e.jsx("div",{className:"lg:text-2xl text-xl font-semibold",children:"Average Rating"}),e.jsxs("div",{className:"mt-3 lg:text-3xl text-2xl text-blue-400",children:[r.rating.toFixed(1),"/5"]}),e.jsx("div",{className:"flex mt-3",children:[...Array(5)].map((t,s)=>{const l=s<Math.floor(r.rating),a=s<r.rating&&s>=Math.floor(r.rating);return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:l?"gold":a?"url(#half-star)":"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"lg:size-6 size-5 text-yellow-500",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-star",children:[e.jsx("stop",{offset:"50%",stopColor:"gold"}),e.jsx("stop",{offset:"50%",stopColor:"none"})]})}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3.5l2.715 5.451 6.027.488-4.373 3.751 1.331 5.551L12 15.902l-5.7 3.839 1.331-5.551-4.373-3.751 6.027-.488L12 3.5z"})]},s)})})]}),e.jsxs("div",{className:"flex-auto flex flex-col lg:border max-h-[280px] gap-10 overflow-y-auto lg:border-gray-200 lg:px-8 lg:py-10",children:[e.jsx("div",{className:"lg:text-2xl text-xl font-semibold",children:"Comment"}),C.map(t=>e.jsxs("div",{className:`flex justify-between items-center ${c?"bg-custom-layout-dark":"bg-custom-layout-light"}  lg:p-5 p-2 ml-2 rounded-xl`,children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex gap-5 items-center",children:[e.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSPzWqYhEAvpn3JMQViAxdbz4ZAM9wW1AfQMQ&s",className:"lg:size-12 size-8 rounded-full border border-gray-300"}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"lg:text-lg text-base",children:t.username}),e.jsx("div",{className:"flex",children:[...Array(5)].map((s,l)=>{const a=l<Math.floor(t.star),y=l<t.star&&l>=Math.floor(t.star);return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:a?"gold":y?"url(#half-star)":"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"lg:size-6 size-4 text-yellow-500",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-star",children:[e.jsx("stop",{offset:"50%",stopColor:"gold"}),e.jsx("stop",{offset:"50%",stopColor:"none"})]})}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3.5l2.715 5.451 6.027.488-4.373 3.751 1.331 5.551L12 15.902l-5.7 3.839 1.331-5.551-4.373-3.751 6.027-.488L12 3.5z"})]},l)})})]})]}),e.jsx("div",{className:"mt-5 lg:text-lg text-base",children:t.comment})]}),e.jsxs("div",{className:"flex flex-col justify-center items-center",onClick:()=>T(t.id),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"lg:size-6 size-5 cursor-pointer relative top-12 lg:-right-4 -right-0",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"})}),e.jsxs("div",{className:`flex flex-col border relative top-12 -right-4  border-gray-300 transition-all duration-300 overflow-hidden${L===t.id?"max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:[e.jsx("button",{className:"py-2 px-4 hover:bg-gray-200",onClick:()=>O(t),children:"Edit"}),e.jsx("button",{className:"py-2 px-4 hover:bg-gray-200",onClick:()=>q(t.id),children:"Remove"})]})]})]},t.id))]})]})]})]}),e.jsxs("div",{className:"lg:mt-20 mt-10",children:[e.jsx("div",{className:"lg:text-3xl text-2xl font-semibold",children:"Related Products"}),e.jsx("div",{children:e.jsx("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 grid-cols-1 gap-8 py-3 mt-4",children:w.length>0?w.map(t=>e.jsxs("div",{className:"border border-gray-200 rounded-xl hover:scale-105 duration-300",children:[e.jsx("div",{children:e.jsx("div",{className:"border-b border-gray-200 lg:max-h-[300px]",children:e.jsx(E,{to:`/member/recommendations/${t.id}`,className:"min-h-[150px] cursor-pointer",children:e.jsx("img",{src:t.images[0].downloadUrl,alt:"",className:"w-full h-[290px] rounded-t-lg"})},t.images[0].id)})}),e.jsxs("div",{className:"px-7 py-5 text-xl lg:mt-5 font-medium",children:[e.jsx("div",{className:"line-clamp-1",children:t.name}),((t==null?void 0:t.price)??0).toLocaleString("vi-VN",{style:"currency",currency:"VND"})]})]},t.id)):e.jsx("div",{className:"text-lg",children:"No related products found."})})})]})]})]})]})})}export{pe as default};
