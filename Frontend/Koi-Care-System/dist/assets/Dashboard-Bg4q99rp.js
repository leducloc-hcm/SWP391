import{d as re,r as l,j as e,P as N,a as d}from"./index-DsR5MBtH.js";import{L as se,H as ae}from"./LeftSideBar-CeYCRzgh.js";import{T as oe}from"./TopLayoutShop-CQxrzWXR.js";import{E as le,D as ne,H as de,I as ie}from"./index-gO7psG0g.js";import{d as ce}from"./index-B5ip7E7x.js";import{b as me}from"./index-BMqfeWhp.js";import{P as xe,a as he,d as m}from"./dayjs.min-D-eifQ1O.js";import{R as g,C as v,X as k,Y as D,T as p,L as f,q as ue,B as ge,a as S}from"./BarChart-CiRbiy6m.js";import{A as pe,a as C}from"./AreaChart-DOd6HY96.js";import{D as P}from"./DataGrid-ChJUn34g.js";import"./index-DSRF4rO0.js";/* empty css            */import"./logo-DG-ZgLhE.js";import"./isEqual-Bky0V7bD.js";import"./index-BKN4LrXa.js";import"./toPropertyKey-PLuKRk1e.js";import"./Typography-BGxL3EC8.js";import"./SwitchBase-C3VyX5I_.js";import"./InputAdornment-D4oGorCC.js";function Ie(){const{isDarkMode:i}=re(),[j,E]=l.useState([]),[y,A]=l.useState([]),[w,z]=l.useState([]),[F,M]=l.useState([]),[O,$]=l.useState([]),[h,B]=l.useState([]),[x,I]=l.useState([]),[T,Y]=l.useState([]),c=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")+"đ",[u,R]=l.useState("day"),U=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const r=await d.get("https://koicaresystemv2.azurewebsites.net/api/profile/all/member",{headers:{Authorization:`Bearer ${t}`}}),s={};r.data.data.forEach(o=>{const n=o.createdDate;s[n]||(s[n]={date:n,users:0,usersPremium:0}),s[n].users+=1,o.status==="PREMIUM"&&(s[n].usersPremium+=1)});const a=Object.values(s);M(a),z(r.data.data)}catch(t){console.log("Error fetching users:",t)}},G=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const r=await d.get("https://koicaresystemv2.azurewebsites.net/api/orders/all",{headers:{Authorization:`Bearer ${t}`}});I(r.data.data)}catch(t){console.log("Error fetching Orders:",t)}},K=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const r=await d.get("https://koicaresystemv2.azurewebsites.net/api/reports/category",{headers:{Authorization:`Bearer ${t}`}});E(r.data.data)}catch(t){console.log("Error fetching category:",t)}},L=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const r=await d.get("https://koicaresystemv2.azurewebsites.net/api/reports/product",{headers:{Authorization:`Bearer ${t}`}});A(r.data.data)}catch(t){console.log("Error fetching products:",t)}},H=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const r=await d.get("https://koicaresystemv2.azurewebsites.net/api/blog",{headers:{Authorization:`Bearer ${t}`}});$(r.data.data)}catch(t){console.log("Error fetching blogs:",t)}},V=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const r=await d.get("https://koicaresystemv2.azurewebsites.net/api/payment/all",{headers:{Authorization:`Bearer ${t}`}});B(r.data.data)}catch(t){console.log("Error fetching Payments:",t)}},W=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const r=await d.get("https://koicaresystemv2.azurewebsites.net/api/suppliers/all",{headers:{Authorization:`Bearer ${t}`}});Y(r.data.data)}catch(t){console.log("Error fetching tags:",t)}};l.useEffect(()=>{U(),G(),K(),L(),V(),H(),W()},[]);const X=[{field:"image",headerName:"Image",width:100,renderCell:t=>e.jsx("div",{className:"h-full flex items-center",children:e.jsx("img",{src:t.row.imageUrl,alt:"Product",className:"w-20 h-16 object-cover rounded-md "})})},{field:"productName",headerName:"Product Name",flex:1},{field:"percent",headerName:"Percent",width:100,renderCell:t=>e.jsxs("div",{className:"relative w-full mt-6",children:[e.jsx("div",{className:"absolute inset-0 bg-green-300",style:{width:`${t.row.percent}%`}}),e.jsxs("div",{className:"relative z-10 text-sm border font-semibold text-green-500 text-center",children:[t.row.percent,"%"]})]})},{field:"totalPrice",headerName:"Total Price",width:100,renderCell:t=>c(t.row.totalPrice)}],q=t=>{const r=new Date(t),s=String(r.getDate()).padStart(2,"0"),a=String(r.getMonth()+1).padStart(2,"0"),o=r.getFullYear(),n=String(r.getHours()).padStart(2,"0"),ee=String(r.getMinutes()).padStart(2,"0"),te=String(r.getSeconds()).padStart(2,"0");return`${n}:${ee}:${te} ${s}/${a}/${o}`},J=[{field:"id",headerName:"ID",width:50},{field:"orderDate",headerName:"Date",flex:1,renderCell:t=>q(t.row.orderDate)},{field:"recipientName",headerName:"Name",flex:1},{field:"status",headerName:"Status",width:130,renderCell:t=>{const r=t.value;let s="border-2 text-sm font-medium py-1 px-2 rounded text-center";switch(r){case"PENDING":s+=" border-yellow-500 text-yellow-500";break;case"PROCESSING":s+=" border-blue-500 text-blue-500";break;case"DELIVERED":s+=" border-green-500 text-green-500";break;case"CANCELLED":s+=" border-red-500 text-red-500";break;default:s+=" border-gray-500 text-gray-500"}return e.jsx("div",{className:"h-full flex justify-center items-center",children:e.jsx("div",{className:s,children:r})})}},{field:"totalPrice",headerName:"Total Price",width:100,renderCell:t=>c(t.row.totalAmount)}],Q=[...x].sort((t,r)=>new Date(r.orderDate)-new Date(t.orderDate)),Z=(()=>{const t=[],r={},s=a=>u==="day"?m(a).format("YYYY-MM-DD"):u==="month"?m(a).format("YYYY-MM"):m(a).format("YYYY");h.forEach(a=>{const o=s(a.createDate);r[o]||(r[o]={date:o,paymentAmount:0,orderAmount:0}),r[o].paymentAmount+=a.amount}),x.forEach(a=>{const o=s(a.orderDate);r[o]||(r[o]={date:o,paymentAmount:0,orderAmount:0}),r[o].orderAmount+=a.totalAmount});for(const a in r)t.push(r[a]);return t.sort((a,o)=>m(a.date).isBefore(m(o.date))?-1:1)})(),b=["#0088FE","#00C49F","#FFBB28","#FF8042","#FF5733"],_=({percent:t})=>` ${t.toFixed(2)}%`;return e.jsxs("div",{className:"h-screen flex",children:[e.jsx(se,{}),e.jsxs("div",{className:`relative ${i?"bg-custom-light text-white":"bg-white text-black"} overflow-y-auto flex-1 flex-col overflow-x-hidden duration-200 ease-linear`,children:[e.jsx(ae,{}),e.jsxs("div",{className:"py-5 px-[30px] max-w-[1750px] mx-auto",children:[e.jsx(oe,{text:"Dashboard",links:"shop/dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:[e.jsxs("div",{className:"border flex flex-col justify-center items-center p-6 shadow rounded-lg bg-blue-100",children:[e.jsx(le,{className:"w-12 h-12 text-blue-700"}),e.jsx("h2",{className:"text-xl text-blue-700 font-semibold pt-4",children:"Total Users"}),e.jsx("p",{className:"text-2xl text-blue-700",children:w.length}),e.jsxs("p",{className:"text-sm text-blue-700 mt-2",children:["Total Premium: ",w.filter(t=>t.status==="PREMIUM").length]})]}),e.jsxs("div",{className:"border flex flex-col justify-center items-center p-6 shadow rounded-lg bg-green-100",children:[e.jsx(ne,{className:"w-16 h-12 text-green-600"}),e.jsx("h2",{className:"text-xl font-semibold pt-4 text-green-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl text-green-600",children:x.length}),e.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["Total Amount: ",c(x.reduce((t,r)=>t+r.totalAmount,0))]})]}),e.jsxs("div",{className:"border flex flex-col justify-center items-center p-6 shadow rounded-lg bg-yellow-100",children:[e.jsx(de,{className:"w-16 h-12 text-yellow-500"}),e.jsx("h2",{className:"text-xl font-semibold pt-4 text-yellow-500",children:"Total Payments"}),e.jsx("p",{className:"text-2xl text-yellow-500",children:h.length}),e.jsxs("p",{className:"text-sm text-yellow-500 mt-2",children:["Total Amount: ",c(h.reduce((t,r)=>t+r.amount,0))]})]}),e.jsxs("div",{className:"border flex flex-col justify-center items-center p-6 shadow rounded-lg bg-purple-100",children:[e.jsx(ce,{className:"w-16 h-12 text-purple-600"}),e.jsx("h2",{className:"text-xl font-semibold pt-4 text-purple-600",children:"Total Supplier"}),e.jsx("p",{className:"text-2xl text-purple-600",children:T.length})]}),e.jsxs("div",{className:"border flex flex-col justify-center items-center p-6 shadow rounded-lg bg-red-100",children:[e.jsx(ie,{className:"w-16 h-12 text-red-700"}),e.jsx("h2",{className:"text-xl font-semibold pt-4 text-red-700",children:"Total Products"}),e.jsx("p",{className:"text-2xl text-red-700",children:y.length})]}),e.jsxs("div",{className:"border flex flex-col justify-center items-center p-6 shadow rounded-lg bg-teal-100",children:[e.jsx(me,{className:"w-16 h-12 text-teal-700"}),e.jsx("h2",{className:"text-xl font-semibold pt-4 text-teal-700",children:"Total Blogs"}),e.jsx("p",{className:"text-2xl text-teal-700",children:O.length})]})]}),e.jsxs("div",{className:"p-6 shadow border rounded-lg mt-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Top Products"}),e.jsx(N,{sx:{height:400},children:e.jsx(P,{rows:y,columns:X,pageSize:100,pageSizeOptions:[5,10,20,50,100],rowHeight:73,checkboxSelection:!0,disableExtendRowFullWidth:!0,getRowId:t=>t.id,sx:{"& .MuiDataGrid-columnHeaders":{backgroundColor:i?"#333":"#f5f5f5"},"& .MuiDataGrid-row:hover":{backgroundColor:i?"rgb(36 48 63 / var(--tw-bg-opacity))":"#e0e0e0"}}})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-8 gap-10",children:[e.jsxs("div",{className:"lg:col-span-5 flex flex-col  mt-6 border rounded-md",children:[e.jsxs("div",{className:"my-4 px-6 flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Orders and Payments Analytics"}),e.jsxs("select",{value:u,onChange:t=>R(t.target.value),className:`px-4 py-2 border rounded-md ${i?"bg-custom-dark text-white":"bg-white text-black"}`,children:[e.jsx("option",{value:"day",children:"Day"}),e.jsx("option",{value:"month",children:"Month"}),e.jsx("option",{value:"year",children:"Year"})]})]}),e.jsx("div",{className:"p-6",children:e.jsx(g,{width:"100%",height:400,children:e.jsxs(pe,{data:Z,margin:{left:50,right:20,top:20,bottom:20},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})]}),e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"date"}),e.jsx(D,{tickFormatter:t=>c(t)}),e.jsx(p,{formatter:t=>c(t)}),e.jsx(f,{}),e.jsx(C,{type:"monotone",dataKey:"paymentAmount",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorUv)",name:"Payments"}),e.jsx(C,{type:"monotone",dataKey:"orderAmount",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorPv)",name:"Orders"})]})})})]}),e.jsx("div",{className:"lg:col-span-3 grid grid-cols-1 lg:grid-cols-1 gap-10",children:e.jsxs("div",{className:"p-6 shadow border rounded-lg mt-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Earning by Category"}),e.jsx(g,{width:"100%",height:400,children:e.jsxs(xe,{children:[e.jsx(he,{data:j,dataKey:"totalPrice",nameKey:"categoryName",cx:"50%",cy:"50%",outerRadius:150,innerRadius:80,fill:"#8884d8",label:_,labelLine:!1,children:j.map((t,r)=>e.jsx(ue,{fill:b[r%b.length]},`cell-${r}`))}),e.jsx(p,{formatter:t=>`${new Intl.NumberFormat("vi-VN").format(t)} đ`}),e.jsx(f,{verticalAlign:"bottom",height:36})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[e.jsxs("div",{className:"flex flex-col  mt-6 border rounded-md",children:[e.jsx("div",{className:"my-3 px-5 pt-4 flex justify-between items-center",children:e.jsx("h1",{className:"text-start font-bold text-2xl",children:"User Report"})}),e.jsx(g,{className:"p-2",width:"100%",height:450,children:e.jsxs(ge,{data:F,children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"date"}),e.jsx(D,{}),e.jsx(p,{}),e.jsx(f,{}),e.jsx(S,{dataKey:"users",fill:"#8884d8",name:"Total Users",animationKey:"users"}),e.jsx(S,{dataKey:"usersPremium",fill:"#82ca9d",name:"Premium Users",animationKey:"usersPremium"})]})})]}),e.jsxs("div",{className:"p-6 shadow border rounded-lg mt-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"New Orders"}),e.jsx(N,{sx:{height:450},children:e.jsx(P,{rows:Q,columns:J,pageSize:100,pageSizeOptions:[5,10,20,50,100],rowHeight:68,checkboxSelection:!0,disableExtendRowFullWidth:!0,getRowId:t=>t.id,sx:{"& .MuiDataGrid-columnHeaders":{backgroundColor:i?"#333":"#f5f5f5"},"& .MuiDataGrid-row:hover":{backgroundColor:i?"rgb(36 48 63 / var(--tw-bg-opacity))":"#e0e0e0"}}})})]})]})]})]})]})}export{Ie as default};
