import{d as B,r as s,e as R,u as H,j as e,a as l,B as _}from"./index-Qtd3etr3.js";import{L as U,H as V}from"./LeftSideBar-FT7tCOUc.js";import{T as Z}from"./TopLayout-DUOKeQ7A.js";import"./index-BuglD1Vv.js";import"./index-DF6yzlP_.js";import"./index-CYe7FaXN.js";import"./index-CdZqjTQo.js";/* empty css            */import"./logo-DG-ZgLhE.js";import"./Typography-Ccp8Yzjl.js";function re(){const{isDarkMode:o}=B(),[E,I]=s.useState([]),[k,w]=s.useState(!1),[N,i]=s.useState(!1),[G,y]=s.useState(null),[C,T]=s.useState([]),[d,c]=s.useState(""),[m,u]=s.useState(""),[h,g]=s.useState(""),[x,p]=s.useState(""),[b,v]=s.useState(""),{id:L}=R(),$=H(),j=()=>{w(!k)},A=t=>{c(t.logTitle),u(t.logDate),g(t.category),v(t.note),p(t.koiPondName),localStorage.setItem("logId",t.logId),P(!0)},f=()=>{i(!N),i(!1),y(null)},P=t=>{y(t),i(!0),w(!1)},n=async()=>{try{const t=localStorage.getItem("token"),r=L;t||console.log("not found token");const a=await l.get(`https://koicaresystemv2.azurewebsites.net/api/log/koiPond/${r}`,{headers:{Authorization:`Bearer ${t}`}});I(a.data.data)}catch(t){console.log("err",t)}},S=async()=>{try{const t=localStorage.getItem("token");t||console.log("not found token");const r=localStorage.getItem("logId");await l.delete(`https://koicaresystemv2.azurewebsites.net/api/log/delete/${r}`,{headers:{Authorization:`Bearer ${t}`}}),n(),f()}catch(t){console.log("err",t)}},M=async()=>{var t,r;try{const a=localStorage.getItem("token"),O=localStorage.getItem("id");if(!a)throw new Error("No token found");const W=await l.get(`https://koicaresystemv2.azurewebsites.net/api/koiponds/user/${O}/koiponds`,{headers:{Authorization:`Bearer ${a}`}});T(W.data.data)}catch(a){l.isAxiosError(a)?((t=a.response)==null?void 0:t.status)===401?(console.error("Unauthorized access - Token expired or invalid. Logging out..."),localStorage.removeItem("token"),localStorage.removeItem("id"),_.error("Token expired navigate to login"),$("/login")):console.error("Error fetching ponds:",(r=a.response)==null?void 0:r.status,a.message):console.error("An unexpected error occurred:",a)}},F=async()=>{try{const t=localStorage.getItem("token");await l.post("https://koicaresystemv2.azurewebsites.net/api/log/create",{logTitle:d,logDate:m,category:h.toUpperCase(),note:b,koiPondId:x},{headers:{Authorization:`Bearer ${t}`}}),n(),j(!1)}catch(t){console.error("Error details:",t)}},z=async()=>{try{const t=localStorage.getItem("token"),r=localStorage.getItem("logId");await l.put(`https://koicaresystemv2.azurewebsites.net/api/log/update/${r}`,{logTitle:d,logDate:m,category:h.toUpperCase(),note:b,koiPondId:x},{headers:{Authorization:`Bearer ${t}`}}),n(),f()}catch(t){console.error("Error details:",t)}};s.useEffect(()=>{M()},[]),s.useEffect(()=>{n()},[]);const D=t=>{const r={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1};return new Date(t).toLocaleDateString(void 0,r)};return e.jsx("div",{children:e.jsxs("div",{className:"h-screen flex",children:[e.jsx(U,{}),e.jsxs("div",{className:`relative ${o?"bg-custom-dark text-white":"bg-white text-black"} shadow-xl flex-1 flex-col overflow-y-auto overflow-x-hidden`,children:[e.jsx(V,{}),e.jsxs("div",{className:"py-5 px-[30px] mx-auto max-w-[1750px]",children:[e.jsx(Z,{text:"My Pond",textName:"My Pond LogId",links:"member/myPond"}),e.jsxs("div",{className:"grid grid-cols-2 gap-10",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"fixed bottom-5 right-5 text-lg text-black outline-none rounded-full bg-custom-layout-light shadow-lg size-16 p-2 cursor-pointer",onClick:()=>{j()},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),E.map(t=>e.jsxs("div",{onClick:()=>A(t),className:"border border-gray-50 shadow-lg rounded-xl px-10 py-5",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"text-2xl font-semibold",children:t.logTitle}),e.jsx("div",{className:"py-1 px-2 bg-blue-400 text-white rounded-xl",children:t.category})]}),e.jsx("div",{className:"flex justify-between",children:e.jsxs("div",{className:"flex-none w-[500px]",children:[e.jsx("div",{className:"mt-5 text-lg",children:t.koiPondName}),e.jsx("div",{className:"mt-3 text-red-500",children:D(t.logDate)}),e.jsx("div",{className:"mt-3",children:t.note})]})})]},t.logId)),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-end z-40",children:e.jsxs("div",{className:` ${o?"bg-custom-dark":"bg-white"}  min-w-[80vh] m-auto p-6 rounded-lg shadow-lg`,children:[e.jsxs("div",{className:"flex justify-between mb-5",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",onClick:()=>{j()},className:"size-10 text-red-500 cursor-pointer",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),e.jsx("button",{onClick:()=>F(),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-10 text-green-500 cursor-pointer",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})})]}),e.jsx("h3",{className:"mb-5 text-2xl font-bold",children:"Add a Log"}),e.jsxs("div",{className:"grid grid-cols-2 grid-rows-2 gap-4",children:[e.jsxs("div",{className:"relative col-span-1",children:[e.jsx("label",{htmlFor:"name",className:`absolute block -top-[12px] ${o?"bg-custom-dark":"bg-white"} left-3 text-red-500 font-semibold`,children:"Title:"}),e.jsx("input",{type:"text",id:"name",placeholder:"Enter title",onChange:t=>c(t.target.value),className:`w-full p-3 ${o?"bg-custom-dark":"bg-white"} border border-black  rounded-lg focus:outline-none transition-colors duration-200`})]}),e.jsxs("div",{className:"relative col-span-1",children:[e.jsx("label",{htmlFor:"volume",className:`absolute -top-[12px] left-3 text-red-500 ${o?"bg-custom-dark":"bg-white"} font-semibold`,children:"Date & time:"}),e.jsx("input",{type:"datetime-local",id:"volume",placeholder:"Enter volume",onChange:t=>u(t.target.value),className:`w-full p-3 ${o?"bg-custom-dark":"bg-white"} border border-black rounded-lg focus:outline-none transition-colors duration-200`})]}),e.jsxs("div",{className:"mb-4 relative col-span-1",children:[e.jsx("label",{htmlFor:"depth",className:`absolute -top-[12px] left-3 text-red-500 ${o?"bg-custom-dark":"bg-white"} font-semibold`,children:"Category:"}),e.jsxs("select",{id:"pondId",onChange:t=>g(t.target.value),className:"block w-full p-3 border border-black rounded-md shadow-sm",children:[e.jsx("option",{value:"OTHER",children:"Other"}),e.jsx("option",{value:"WATER_CHANGE",children:"Water Change"}),e.jsx("option",{value:"KOI_TREATMENT",children:"Koi Treatment"}),e.jsx("option",{value:"WATER_TREATMENT",children:"Water Treatment"}),e.jsx("option",{value:"POPULATION_CHANGE",children:"Population Change"}),e.jsx("option",{value:"EXPERIENCE",children:"Experience"}),e.jsx("option",{value:"POND_MODIFICATION",children:"Pond Modification"})]})]}),e.jsxs("div",{className:"mb-4 relative col-span-1",children:[e.jsx("label",{htmlFor:"drainCount",className:`absolute -top-[12px] left-3 text-red-500 ${o?"bg-custom-dark":"bg-white"} font-semibold`,children:"Pond:"}),e.jsxs("select",{id:"pondId",onChange:t=>p(t.target.value),className:"block w-full p-3 border border-black rounded-md shadow-sm",children:[e.jsx("option",{value:"",children:"Select a pond"}),C.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"mb-4 mt-4 relative w-full",children:[e.jsx("label",{htmlFor:"drainCount",className:`absolute -top-[12px] left-3 text-red-500 ${o?"bg-custom-dark":"bg-white"} font-semibold`,children:"Note:"}),e.jsx("input",{type:"text",onChange:t=>v(t.target.value),id:"drainCount",placeholder:"Note",className:`w-full h-32 p-3 ${o?"bg-custom-dark":"bg-white"} border border-black rounded-lg focus:outline-none transition-colors duration-200`})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-end z-40",children:e.jsxs("div",{className:`${o?"bg-custom-dark":"bg-white"}  min-w-[80vh] m-auto p-6 rounded-lg shadow-lg`,children:[e.jsxs("div",{className:"flex justify-between mb-5",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",onClick:()=>{f()},className:"size-10 text-red-500 cursor-pointer",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),e.jsx("button",{onClick:()=>z(),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-10 text-green-500 cursor-pointer",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})})]}),e.jsx("h3",{className:"mb-5 text-2xl font-bold",children:"Update a Log"}),e.jsxs("div",{className:"grid grid-cols-2 grid-rows-2 gap-4",children:[e.jsxs("div",{className:"mb-4 relative col-span-1",children:[e.jsx("label",{htmlFor:"name",className:`absolute block -top-[12px] ${o?"bg-custom-dark":"bg-white"} left-3 text-red-500 font-semibold`,children:"Title:"}),e.jsx("input",{type:"text",value:d,onChange:t=>c(t.target.value),placeholder:"Enter title",className:`w-full p-3 ${o?"bg-custom-dark":"bg-white"} border border-black  rounded-lg focus:outline-none transition-colors duration-200`})]}),e.jsxs("div",{className:"mb-4 relative col-span-1",children:[e.jsx("label",{htmlFor:"volume",className:`absolute -top-[12px] left-3 text-red-500 ${o?"bg-custom-dark":"bg-white"} font-semibold`,children:"Date & time:"}),e.jsx("input",{type:"datetime-local",value:m,onChange:t=>u(t.target.value),placeholder:"Enter Date Time",className:`w-full p-3 ${o?"bg-custom-dark":"bg-white"} border border-black rounded-lg focus:outline-none transition-colors duration-200`})]}),e.jsxs("div",{className:"relative col-span-1",children:[e.jsx("label",{htmlFor:"depth",className:`absolute -top-[12px] left-3 text-red-500 ${o?"bg-custom-dark":"bg-white"} font-semibold`,children:"Category:"}),e.jsxs("select",{id:"pondId",value:h,onChange:t=>g(t.target.value),className:"block w-full p-3 border border-black rounded-md shadow-sm",children:[e.jsx("option",{value:"OTHER",children:"Other"}),e.jsx("option",{value:"WATER_CHANGE",children:"Water Change"}),e.jsx("option",{value:"KOI_TREATMENT",children:"Koi Treatment"}),e.jsx("option",{value:"WATER_TREATMENT",children:"Water Treatment"}),e.jsx("option",{value:"POPULATION_CHANGE",children:"Population Change"}),e.jsx("option",{value:"EXPERIENCE",children:"Experience"}),e.jsx("option",{value:"POND_MODIFICATION",children:"Pond Modification"})]})]}),e.jsxs("div",{className:"mb-4 relative col-span-1",children:[e.jsx("label",{htmlFor:"drainCount",className:`absolute -top-[12px] left-3 text-red-500 ${o?"bg-custom-dark":"bg-white"} font-semibold`,children:"Pond:"}),e.jsxs("select",{id:"pondId",value:x,onChange:t=>p(t.target.value),className:"block w-full p-3 border border-black rounded-md shadow-sm",children:[e.jsx("option",{value:"",children:"Select a pond"}),C.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"mt-4 relative w-full",children:[e.jsx("label",{htmlFor:"drainCount",className:`absolute -top-[12px] left-3 text-red-500 ${o?"bg-custom-dark":"bg-white"} font-semibold`,children:"Note:"}),e.jsx("textarea",{type:"text",value:b,onChange:t=>v(t.target.value),placeholder:"Note",className:`w-full h-32 p-3 ${o?"bg-custom-dark":"bg-white"} border border-black rounded-lg focus:outline-none transition-colors duration-200`})]}),e.jsxs("div",{className:"w-full flex flex-col justify-center",children:[e.jsx("button",{className:"mx-auto",onClick:()=>S(),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-12 mx-auto p-2 rounded-full bg-red-500 text-white cursor-pointer mt-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})})}),e.jsx("p",{className:"text-center font-semibold",children:"Delete this log"})]})]})})]})]})]})]})})}export{re as default};
